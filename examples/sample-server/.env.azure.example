# Azure AD / Microsoft Identity Platform Configuration Example
# Copy this file to .env or .env.local and update with your Azure AD credentials

# ==============================================================================
# Azure AD Setup Instructions
# ==============================================================================
# 1. Go to https://portal.azure.com/
# 2. Navigate to "Azure Active Directory" → "App registrations"
# 3. Click "New registration"
# 4. Set name and supported account types
# 5. Add Redirect URI (Web): http://localhost:8080/auth/callback
# 6. Click "Register"
# 7. Go to "Certificates & secrets" → "New client secret"
# 8. Copy the Client Secret value immediately
# 9. Go to "Authentication" → Add logout URL: http://localhost:8080

# Azure Tenant Configuration
AZURE_TENANT=common  # or your tenant ID (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)

# OAuth2 Provider Endpoints - Azure AD
OAUTH_AUTHORIZATION_ENDPOINT=https://login.microsoftonline.com/${AZURE_TENANT}/oauth2/v2.0/authorize
OAUTH_TOKEN_ENDPOINT=https://login.microsoftonline.com/${AZURE_TENANT}/oauth2/v2.0/token
OAUTH_END_SESSION_ENDPOINT=https://login.microsoftonline.com/${AZURE_TENANT}/oauth2/v2.0/logout

# OAuth2 Credentials - Replace with your Azure AD credentials
OAUTH_CLIENT_ID=your-application-client-id
OAUTH_CLIENT_SECRET=your-client-secret

# OAuth2 Redirect URIs
OAUTH_REDIRECT_URI=http://localhost:8080/auth/callback
POST_LOGOUT_REDIRECT_URI=http://localhost:8080

# OAuth2 Scopes
OAUTH_SCOPES=openid,email,profile

# Base path for authentication routes (optional, default: /auth)
OAUTH_BASE_PATH=/auth

# Session Security
# Generate a secure key with: openssl rand -base64 64
PRIVATE_COOKIE_KEY=generate-a-secure-random-key-at-least-64-characters-long

# PKCE Code Challenge Method
CODE_CHALLENGE_METHOD=S256

# Server Configuration
SERVER_HOST=127.0.0.1
SERVER_PORT=8080

# ==============================================================================
# Important Notes for Azure AD
# ==============================================================================
#
# 1. Azure AD supports full OIDC including logout
#    - Set OAUTH_END_SESSION_ENDPOINT for proper logout
#    - Use OidcLogoutHandler in your code
#
# 2. Tenant Configuration:
#    - common: Multi-tenant (personal & work accounts)
#    - organizations: Work/school accounts only
#    - consumers: Personal Microsoft accounts only
#    - {tenant-id}: Specific tenant (most secure)
#
# 3. Application (Client) ID format:
#    - UUID format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
#
# 4. Client Secret:
#    - Copy the VALUE (not the Secret ID)
#    - Expires after configured period (6 months, 1 year, etc.)
#    - Set reminder to rotate before expiration
#
# 5. Scopes:
#    - openid: Required for OpenID Connect
#    - email: User's email address
#    - profile: User's profile information
#    - offline_access: Refresh tokens (optional)
#
# 6. Redirect URIs:
#    - Must be HTTPS in production
#    - Must match exactly (case-sensitive)
#    - Can configure multiple redirect URIs
#
# 7. For production:
#    - Use specific tenant ID instead of "common"
#    - Enable Conditional Access policies
#    - Configure token lifetime policies
#    - Use managed identities where possible
#
# ==============================================================================
# Example with Real Format (Masked Values)
# ==============================================================================
# OAUTH_CLIENT_ID=12345678-1234-1234-1234-123456789012
# OAUTH_CLIENT_SECRET=abc~DEF123ghi-JKL456mno.PQR789stu

