# Keycloak OAuth2/OIDC Configuration Example
# Copy this file to .env or .env.local and update with your Keycloak credentials

# ==============================================================================
# Keycloak Setup Instructions
# ==============================================================================
# 1. Access your Keycloak Admin Console
# 2. Select or create a realm
# 3. Go to "Clients" â†’ "Create"
# 4. Set Client ID (e.g., "my-app")
# 5. Set Client Protocol to "openid-connect"
# 6. Set Access Type to "confidential"
# 7. Add Valid Redirect URIs: http://localhost:8080/auth/callback
# 8. Add Valid Post Logout Redirect URIs: http://localhost:8080
# 9. Save and copy the Client Secret from "Credentials" tab

# Keycloak Configuration
KEYCLOAK_URL=https://keycloak.example.com
KEYCLOAK_REALM=your-realm

# OAuth2 Provider Endpoints - Keycloak
OAUTH_AUTHORIZATION_ENDPOINT=${KEYCLOAK_URL}/realms/${KEYCLOAK_REALM}/protocol/openid-connect/auth
OAUTH_TOKEN_ENDPOINT=${KEYCLOAK_URL}/realms/${KEYCLOAK_REALM}/protocol/openid-connect/token
OAUTH_END_SESSION_ENDPOINT=${KEYCLOAK_URL}/realms/${KEYCLOAK_REALM}/protocol/openid-connect/logout

# OAuth2 Credentials - Replace with your Keycloak credentials
OAUTH_CLIENT_ID=your-client-id
OAUTH_CLIENT_SECRET=your-client-secret

# OAuth2 Redirect URIs
OAUTH_REDIRECT_URI=http://localhost:8080/auth/callback
POST_LOGOUT_REDIRECT_URI=http://localhost:8080

# OAuth2 Scopes
OAUTH_SCOPES=openid,email,profile

# Base path for authentication routes (optional, default: /auth)
OAUTH_BASE_PATH=/auth

# Session Security
# Generate a secure key with: openssl rand -base64 64
PRIVATE_COOKIE_KEY=generate-a-secure-random-key-at-least-64-characters-long

# PKCE Code Challenge Method
CODE_CHALLENGE_METHOD=S256

# Server Configuration
SERVER_HOST=127.0.0.1
SERVER_PORT=8080

# ==============================================================================
# Important Notes for Keycloak
# ==============================================================================
#
# 1. Keycloak supports full OIDC including RP-Initiated Logout
#    - Set OAUTH_END_SESSION_ENDPOINT for proper logout
#    - Use OidcLogoutHandler in your code
#
# 2. Realm-specific endpoints:
#    - Replace ${KEYCLOAK_REALM} with your realm name
#    - Common realms: master, main, production, etc.
#
# 3. Client configuration:
#    - Access Type: confidential (for server-side apps)
#    - Valid Redirect URIs must match exactly
#    - Standard Flow Enabled: ON
#    - Direct Access Grants Enabled: Optional
#
# 4. Scopes:
#    - openid: Required for OpenID Connect
#    - email: Access to user's email
#    - profile: Access to user's profile
#    - roles: Access to user's roles (optional)
#
# 5. For production:
#    - Use HTTPS for all endpoints
#    - Configure proper realm settings
#    - Enable token rotation
#    - Set appropriate session timeouts
#
